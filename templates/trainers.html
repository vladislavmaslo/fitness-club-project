    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>–¢—Ä–µ–Ω–µ—Ä—ã</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
    </head>
    <body>

        <div class="header-line">
           <div class="header-logo">
               <div class="logo_img">
                   <img src="{{ url_for('static', filename='logo_img.png') }}">
               </div>

               <div class="header-line-text">
                   <div class="logo_text">EnergyFlow</div>
                   <div class="other-text">–õ–ò–ß–ù–´–ô –ö–ê–ë–ò–ù–ï–¢</div>
               </div>
           </div>

            <div class="header-exit">
               <a href="/" class="exit-button">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</a>
           </div>
        </div>

        <div class="navigation-bar">
            <button class="nav-button" id="trainers-button">–¢—Ä–µ–Ω–µ—Ä—ã</button>
            <button class="nav-button" id="profile-button">–ü—Ä–æ—Ñ–∏–ª—å</button>
            <button class="nav-button" id="memberships-button">–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã</button>
        </div>

        <div class="trainers-container">
            <div class="trainers-images">
                {% for trainer in trainers_info %}
                    <div class="trainer-image-wrapper">
                        <img src="{{ url_for('static', filename='trainer_images/' + trainer[5]) }}" alt="Trainer Image" class="trainer-image" data-trainer-id="{{ trainer[0] }}">
                        <div class="trainer-specialization">{{ trainer[4] }}</div> <!-- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ -->
                    </div>
                {% endfor %}
            </div>
        </div>

        <div id="myModal" class="modal">
            <div class="modal-content">
                <img src="" alt="Trainer Thumbnail" id="trainer-thumbnail">
                <div class="modal-content-info">
                    <h2 id="trainer-name"></h2>
                    <p>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: <span id="trainer-specialization"></span></p>
                    <p>–¢–µ–ª–µ—Ñ–æ–Ω: <span id="trainer-phone"></span></p>
                    <p>Email: <span id="trainer-email"></span></p>
                    <button id="showWorkouts" data-trainer-id="">–ü–æ–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</button>
                </div>
                <span class="close" id="closeModal">&times;</span>

            </div>

        </div>

        <div id="workoutModal" class="modal">
            <div class="modal-content">
                <div id="workoutInfo" class="workout-description"></div>
                <span class="close" id="closeWorkoutsModal">&times;</span>
            </div>
        </div>

        <script>
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π JavaScript
            const closeModal = document.getElementById('closeModal');
            const modal = document.getElementById('myModal');
            const body = document.body;

            closeModal.addEventListener('click', function() {
                modal.style.display = 'none';
                body.classList.remove('modal-open');
            });

            window.addEventListener('click', function(event) {
                if (event.target === modal) {
                    modal.style.display = 'none';
                    body.classList.remove('modal-open');
                }
            });

            document.addEventListener('keydown', function(event) {
                if (event.key === 'Escape') {
                    modal.style.display = 'none';
                    body.classList.remove('modal-open');
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ –ø—Ä–æ—Ñ–∏–ª—è, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ—Ñ–∏–ª—è.
            document.getElementById('profile-button').addEventListener('click', function() {
                window.location.href = '/prof';
            });

            document.getElementById('memberships-button').addEventListener('click', function() {
                window.location.href = '/memberships';
            });

            document.addEventListener('DOMContentLoaded', function() {
                // –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const showWorkoutsBtn = document.getElementById('showWorkouts');
                const trainersButton = document.getElementById('trainers-button');
                const buttons = document.querySelectorAll('.nav-button');
                const modal = document.getElementById('myModal');

                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∞—Å—Å–∞ 'active' –¥–ª—è –∫–Ω–æ–ø–∫–∏ —Ç—Ä–µ–Ω–µ—Ä–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                trainersButton.classList.add('active');

                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                buttons.forEach(button => {
                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –Ω–∞–≤–µ–¥–µ–Ω–∏—è –∫—É—Ä—Å–æ—Ä–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É
                    button.addEventListener('mouseover', function() {
                        buttons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                    });

                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è —É—Ö–æ–¥–∞ –∫—É—Ä—Å–æ—Ä–∞ —Å –∫–Ω–æ–ø–∫–∏
                    button.addEventListener('mouseout', function() {
                        if (this !== trainersButton) {
                            this.classList.remove('active');
                            trainersButton.classList.add('active');
                        }
                    });
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                closeModal.addEventListener('click', function() {
                    modal.style.display = 'none';
                });

                window.addEventListener('click', function(event) {
                    if (event.target === modal) {
                        modal.style.display = 'none';
                    }
                });

                document.addEventListener('keydown', function(event) {
                    if (event.key === 'Escape') {
                        modal.style.display = 'none';
                    }
                });

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é —Ç—Ä–µ–Ω–µ—Ä–∞ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                document.querySelectorAll('.trainer-image-wrapper').forEach(wrapper => {
                wrapper.addEventListener('click', function() {
                    const image = this.querySelector('.trainer-image'); // –ù–∞—Ö–æ–¥–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–∏ wrapper
                    const trainerId = image.dataset.trainerId; // –ü–æ–ª—É—á–∞–µ–º ID —Ç—Ä–µ–Ω–µ—Ä–∞ –∏–∑ data-trainer-id

                    showWorkoutsBtn.setAttribute('data-trainer-id', trainerId);

                    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–µ–Ω–µ—Ä–µ —á–µ—Ä–µ–∑ API
                    fetch(`/get_trainer_info/${trainerId}`)
                        .then(response => response.json())
                        .then(data => {
                            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
                            document.getElementById('trainer-name').innerText = data.name;
                            document.getElementById('trainer-email').innerText = data.email;
                            document.getElementById('trainer-phone').innerText = data.phone;
                            document.getElementById('trainer-specialization').innerText = data.specialization;
                            document.getElementById('trainer-thumbnail').src = image.src; // –ò—Å–ø–æ–ª—å–∑—É–µ–º src –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                            modal.style.display = 'block';
                            body.classList.add('modal-open');  // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                        })
                        .catch(error => console.log('–û—à–∏–±–∫–∞:', error));
                });
            });


                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ –∫–Ω–æ–ø–∫–µ "–ü–æ–∫–∞–∑–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏"
                showWorkoutsBtn.addEventListener('click', function() {
                    const trainerId = this.getAttribute('data-trainer-id');

                    // –û—á–∏—Å—Ç–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ workoutInfo –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–æ–≤–æ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
                    document.getElementById('workoutInfo').innerHTML = '';

                    // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ workoutModal
                    const workoutModal = document.getElementById('workoutModal');
                    workoutModal.style.display = 'block';

                    fetch(`/get_workout_info/${trainerId}`)
                        .then(response => response.json())
                        .then(data => {
                            const workoutInfo = document.getElementById('workoutInfo');

                            if (data && data.length > 0) {
                                data.forEach(workout => {
                                    const workoutElement = document.createElement('div');
                                    const schedule = workout.WORKOUT_SCHEDULE;

                                    let formattedSchedule = '';
                                    for (let day in schedule) {
                                        formattedSchedule += `<span>${day}: ${schedule[day]} </span><button class="sign-up-button" data-user-id="{{ session['user_id'] }}" data-workout-id="${workout.WORKOUT_ID}">üìù</button><br>`;
                                    }

                                    workoutElement.innerHTML = `
                                        <div class="workout-info">
                                            <h3>${workout.NAME}</h3>
                                            <p>${workout.DESCRIPTION}</p>
                                            <p>–ú–∞–∫—Å. —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: ${workout.MAX_PARTICIPANTS}</p>
                                            <p>–°—Ç–æ–∏–º–æ—Å—Ç—å: ${workout.COST} BYN</p>
                                            <p>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:<br> ${formattedSchedule}</p>
                                        </div>
                                    `;
                                    workoutInfo.appendChild(workoutElement);
                                });
                            } else {
                                workoutInfo.innerHTML = '<div class="workout-info-none"><p>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç...</p></div>';
                            }
                        })
                        .catch(error => console.log('–û—à–∏–±–∫–∞:', error));

                    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è workoutModal
                    const closeWorkoutsModal = document.getElementById('closeWorkoutsModal');
                    closeWorkoutsModal.addEventListener('click', function() {
                        workoutModal.style.display = 'none'; // –°–∫—Ä—ã—Ç—å –æ–∫–Ω–æ workoutModal
                    });

                    // –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è workoutModal
                    window.addEventListener('click', function(event) {
                        if (event.target === workoutModal) {
                            workoutModal.style.display = 'none';
                        }
                    });

                    document.addEventListener('keydown', function(event) {
                        if (event.key === 'Escape') {
                            workoutModal.style.display = 'none';
                        }
                    });
                });

                // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–∞—Ç—ã –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏
                function getNextDayOfWeek(day) {
                    console.log('day', day)
                    const daysOfWeek = [
                    "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ",
                    "–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫",
                    "–≤—Ç–æ—Ä–Ω–∏–∫",
                    "—Å—Ä–µ–¥–∞",
                    "—á–µ—Ç–≤–µ—Ä–≥",
                    "–ø—è—Ç–Ω–∏—Ü–∞",
                    "—Å—É–±–±–æ—Ç–∞",
                    ];
                    const currentDate = new Date();
                    const currentDay = currentDate.getDay();
                    const targetDay = daysOfWeek.indexOf(day.toLowerCase());
                    console.log('target', targetDay)

                    let difference = targetDay - currentDay;
                    if (difference <= 0) {
                    difference += 7;
                    }

                    const nextDay = new Date(currentDate);
                    nextDay.setDate(currentDate.getDate() + difference);
                    console.log('nextDay',nextDay)
                    return nextDay;
                }

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∫–Ω–æ–ø–∫—É –∑–∞–ø–∏—Å–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
                document.getElementById('workoutInfo').addEventListener('click', function (event) {
                    if (event.target.classList.contains('sign-up-button')) {
                        const workoutId = event.target.getAttribute('data-workout-id');
                        const userId = event.target.getAttribute('data-user-id');

                        const scheduleText = event.target.previousElementSibling.textContent; // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
                        const day = scheduleText.split(':')[0]; // –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –¥–Ω—è
                        const time = scheduleText.split(':')[1] + ':' + scheduleText.split(':')[2];
                        console.log('Schedule:', day, '\nTime:', time);

                        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–∞—Ç—É –¥–ª—è —ç—Ç–æ–≥–æ –¥–Ω—è
                        const targetDate = getNextDayOfWeek(day);

                        // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
                        const data = {
                            user_id: userId,
                            workout_id: workoutId,
                            visit_date: targetDate.toISOString().split('T')[0], // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
                            visit_time: time
                        };

                        fetch('/member_workout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    })
                    .then(response => response.text()) // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
                    .then(message => {
                        alert(message); // –í—ã–≤–æ–¥–∏–º —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                    })
                    .catch(error => console.error('–û—à–∏–±–∫–∞:', error));
                    }
                });

            });
        </script>


    </body>
    </html>